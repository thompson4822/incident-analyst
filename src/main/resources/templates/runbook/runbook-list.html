{#include layout/base}
{#body}
  <div class="space-y-6">
    <!-- Header & Stats -->
    <div class="flex flex-col md:flex-row md:items-center justify-between gap-4">
      <div>
        <h1 class="text-3xl font-bold text-slate-900">Runbook Library</h1>
        <p class="text-sm text-slate-500 mt-1">Standardized procedures for incident response and system maintenance.</p>
      </div>
      <div class="flex items-center gap-4">
        <div class="stats shadow-sm border border-slate-200 bg-white/90">
          <div class="stat py-2 px-4">
            <div class="stat-title text-[10px] uppercase tracking-wider">Total</div>
            <div class="stat-value text-xl text-slate-900">{model.totalCount}</div>
          </div>
        </div>
        <button class="btn btn-primary bg-teal-600 hover:bg-teal-700 border-none text-white">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
          </svg>
          New Runbook
        </button>
      </div>
    </div>

    <!-- Filter Bar -->
    <div class="card bg-white/90 border border-slate-200 shadow-sm">
      <div class="card-body p-4">
        <div class="flex flex-wrap items-center justify-between gap-4">
          <div class="flex flex-wrap items-center gap-2">
            <div role="tablist" class="tabs tabs-boxed bg-slate-100 p-1">
              <a role="tab" class="tab tab-sm tab-active">All</a>
              {#for category in model.categories}
                <a role="tab" class="tab tab-sm">{category}</a>
              {/for}
            </div>
            
            <div class="divider divider-horizontal mx-0"></div>
            
            <select class="select select-sm select-bordered border-slate-200 bg-white text-slate-700">
              <option disabled selected>Severity</option>
              <option>Critical</option>
              <option>High</option>
              <option>Medium</option>
              <option>Low</option>
            </select>
          </div>

          <div class="flex items-center gap-2">
            <div class="relative">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-slate-400">
                <path stroke-linecap="round" stroke-linejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" />
              </svg>
              <input type="text" placeholder="Search runbooks..." class="input input-sm input-bordered border-slate-200 bg-white pl-9 w-64 focus:border-teal-500" />
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Runbook Table -->
    <div class="card bg-white/90 border border-slate-200 shadow-sm overflow-hidden">
      <div class="overflow-x-auto">
        <table class="table table-compact table-zebra w-full">
          <thead class="bg-slate-50 border-b border-slate-200">
            <tr>
              <th class="text-xs font-semibold text-slate-600 uppercase tracking-wider">Name</th>
              <th class="text-xs font-semibold text-slate-600 uppercase tracking-wider">Severity</th>
              <th class="text-xs font-semibold text-slate-600 uppercase tracking-wider">Steps</th>
              <th class="text-xs font-semibold text-slate-600 uppercase tracking-wider">Version</th>
              <th class="text-xs font-semibold text-slate-600 uppercase tracking-wider">Last Updated</th>
              <th class="w-10"></th>
            </tr>
          </thead>
          <tbody>
            {#for runbook in model.runbooks}
              <tr class="hover:bg-slate-50/80 transition-colors group cursor-pointer" onclick="window.location='/runbooks/{runbook.id}'">
                <td class="py-3">
                  <div class="space-y-1">
                    <div class="text-sm font-bold text-slate-900 group-hover:text-teal-600 transition-colors">{runbook.title}</div>
                    <div class="flex flex-wrap gap-1 mt-1">
                      {#for tag in runbook.tags}
                        <span class="badge badge-ghost badge-xs text-[9px]">{tag}</span>
                      {/for}
                    </div>
                  </div>
                </td>
                <td>
                  <span class="badge badge-{runbook.severityColor} badge-outline badge-xs font-medium">{runbook.severity}</span>
                </td>
                <td>
                  <span class="text-xs text-slate-600">{runbook.stepCount} steps</span>
                </td>
                <td>
                  <span class="text-xs font-mono text-slate-500">v{runbook.version}</span>
                </td>
                <td>
                  <div class="text-xs text-slate-600">{runbook.createdAt}</div>
                </td>
                <td>
                  <div class="join">
                    <button class="btn btn-ghost btn-xs btn-square opacity-0 group-hover:opacity-100 transition-opacity" onclick="event.stopPropagation()">
                      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347c-.75.412-1.667-.13-1.667-.986V5.653Z" />
                      </svg>
                    </button>
                    <button class="btn btn-ghost btn-xs btn-square opacity-0 group-hover:opacity-100 transition-opacity" onclick="event.stopPropagation()">
                      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                        <path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10" />
                      </svg>
                    </button>
                  </div>
                </td>
              </tr>
            {/for}
            {#if model.runbooks.isEmpty}
              <tr>
                <td colspan="6" class="py-20 text-center">
                  <div class="flex flex-col items-center gap-3">
                    <div class="p-4 bg-slate-50 rounded-full text-slate-300">
                      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-12 h-12">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.967 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.967 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.967 0 0 0 18 18c-2.305 0-4.408.867-6 2.292m0-14.25v14.25" />
                      </svg>
                    </div>
                    <p class="text-slate-500 font-medium">No runbooks found</p>
                    <p class="text-xs text-slate-400">Start by creating your first standardized procedure.</p>
                  </div>
                </td>
              </tr>
            {/if}
          </tbody>
        </table>
      </div>
    </div>
  </div>
{/body}
{/include}
